# Smithery configuration file: https://smithery.ai/docs/config#smitheryyaml
startCommand:
  type: stdio
  configSchema:
    type: object
    properties:
      gitlabUrl:
        type: string
        description: "您的GitLab服务器URL"
      gitlabToken:
        type: string
        description: "GitLab API访问令牌"
      gitlabApiVersion:
        type: string
        description: "GitLab API版本"
        default: "v4"
      port:
        type: integer
        description: "服务器监听端口"
        default: 3000
      logLevel:
        type: string
        enum: ["error", "warn", "info", "debug", "verbose"]
        description: "日志级别"
        default: "info"
    required: ["gitlabUrl", "gitlabToken"]
  commandFunction: |
    config => ({
      command: "node",
      args: ["src/index.js"],
      env: {
        "GITLAB_URL": config.gitlabUrl,
        "GITLAB_TOKEN": config.gitlabToken,
        "GITLAB_API_VERSION": config.gitlabApiVersion || "v4",
        "PORT": config.port ? config.port.toString() : "3000",
        "LOG_LEVEL": config.logLevel || "info",
        "NODE_ENV": "production",
        "SMITHERY": "true"
      }
    })
build:
  dockerfile: "Dockerfile"
  dockerBuildPath: "."
